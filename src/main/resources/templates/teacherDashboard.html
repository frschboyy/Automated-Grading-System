<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" type="text/css" th:href="@{/css/teacherDashboard.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/logout.css}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <!-- SECONDARY LOGOUT -->
        <div class="top-logout">
            <form th:action="@{/logout}" method="post">
                <button type="submit" class="logout-button">Logout</button>
            </form>
        </div>
        <h1 class="dashboard-title">Teacher Dashboard</h1>
    </header>

    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2 class="sidebar-title">Your Courses</h2>
            <ul id="courseList" class="course-list"></ul>

            <!-- Logout at bottom -->
            <div class="sidebar-logout">
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="logout-button">Logout</button>
                </form>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <h2 id="selectedCourseName" class="selected-course-name">ðŸ“–...</h2>
            <input type="hidden" id="currentCourseId" />

            <div id="courseContent" class="hidden">
                <!-- Students -->
                <section class="card">
                    <h3>Enrolled Students</h3>
                    <ul id="studentList" class="list"></ul>
                </section>

                <!-- Assignments -->
                <section class="card">
                    <div class="card-header">
                        <h3>Assignments</h3>
                    </div>
                    <ul id="assignmentList" class="list"></ul>
                </section>

                <!-- Create Assignment Form -->
                <form id="createAssignmentForm" th:action="@{/teacher/assignments/create}" method="post"
                    enctype="multipart/form-data" class="assignment-form card">
                    <h3>Create Assignment</h3>
                    <div class="form-group">
                        <label for="title">Title</label>
                        <input type="text" id="title" name="title" required />
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="dueDate">Due Date</label>
                        <input type="datetime-local" id="dueDate" name="dueDate" required />
                    </div>
                    <div class="form-group">
                        <label for="assignmentFile">Assignment Document</label>
                        <input type="file" id="assignmentFile" name="assignmentFile" accept=".pdf,.doc,.docx"
                            required />
                    </div>
                    <div class="form-group">
                        <label for="rubricFile">Rubric Document (Optional)</label>
                        <input type="file" id="rubricFile" name="rubricFile" accept=".pdf,.doc,.docx" />
                    </div>
                    <div class="form-group">
                        <label for="rubricWeight">Rubric Weight: <span id="rubricWeightValue">50</span>%</label>
                        <input type="range" id="rubricWeight" name="rubricWeight" min="0" max="100" value="50"
                            oninput="document.getElementById('rubricWeightValue').innerText = this.value" />
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-submit">Create Assignment</button>
                        <a type="button" class="btn-cancel" onclick="clearAssignmentForm()">Cancel</a>
                    </div>
                    <input type="hidden" id="courseId" name="courseId" th:value="${currentCourseId}" />
                </form>
            </div>

            <!-- Edit Assignment Modal -->
            <div id="editAssignmentModal" class="modal">
                <div class="modal-content">
                    <h3>Edit Assignment</h3>
                    <form id="editAssignmentForm" enctype="multipart/form-data">
                        <input type="hidden" id="editId" name="editId" />
                        <label>Title
                            <input id="editTitle" name="editTitle" required>
                        </label>
                        <label>Description
                            <textarea id="editDescription" name="editDescription"></textarea>
                        </label>
                        <label>Due Date
                            <input type="datetime-local" id="editDueDate" name="editDueDate" required>
                        </label>
                        <label>Rubric Weight (%)
                            <input type="number" id="editRubricWeight" name="editRubricWeight" min="0" max="100">
                        </label>
                        <label>Rubric Document (Optional)
                            <input type="file" id="editRubricFile" name="rubricFile" accept=".pdf,.doc,.docx">
                        </label>
                        <label>Assignment Document (Optional)
                            <input type="file" id="editAssignmentFile" name="assignmentDocument"
                                accept=".pdf,.doc,.docx">
                        </label>
                        <div class="modal-actions">
                            <button type="submit" class="btn-primary">Save</button>
                            <button type="button" class="btn-secondary" onclick="closeEditModal()">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script type="text/javascript" th:src="@{/js/teacherDashboard.js}"></script>
</body>

</html>